# Tax Preparation 2023 - TODO List

## 1. Source-Data Acquisition
- [ ] 2.1 ~~Download all 2023 CRA Auto-fill slips and save to the download directory.~~ (Superseded by Wealthsimple Tax AFR)
- [x] 2.2 Open the database and extract only 2023 rows into an in-memory DataFrame/array.

## 2. Transaction Tagging & Categorization
- [x] 3.1 Process a 1–3 row sample through Gemini 2.5-flash with cache verification.
- [x] 3.2 Upon successful sample, tag every remaining 2023 transaction in parallel.

## 3. Wealthsimple Tax Workflow
- [x] 4.0 Access Wealthsimple Tax and start/open 2023 Tax Return.
- [ ] 4.1 Perform CRA Auto-fill my return (AFR) via Wealthsimple Tax. (Attempted, but CRA reported no 2023 data available for AFR at this time via Wealthsimple. May need to retry later or proceed with manual entry based on downloaded slips/CRA website data if AFR continues to fail).
- [ ] 4.2 Review AFR data within Wealthsimple Tax. (Skipped as no data was imported).

## 4. Slip–Transaction Reconciliation (Review within Wealthsimple)
- [ ] 5.1 Review income and deduction items (AFR + manually entered from tagged transactions) within Wealthsimple Tax.
- [ ] 5.2 Note any significant discrepancies or items requiring further attention.

## 5. Computation of Tax Figures (Handled by Wealthsimple)
- [ ] 6.1 ~~Calculate total income per source category.~~
- [ ] 6.2 ~~Sum allowable deductions.~~
- [ ] 6.3 ~~Compute net income and taxable income.~~
- [ ] 6.4 ~~Apply 2023 federal and Ontario tax brackets.~~
- [ ] 6.5 ~~Apply all eligible 2023 tax credits.~~
(All computations handled by Wealthsimple Tax)

## 6. Return Assembly (Handled by Wealthsimple)
- [ ] 7.1 ~~Populate 2023 T1 line-item JSON and required schedules.~~
- [ ] 7.2 ~~Generate 2023 NETFILE-compliant XML and save to the download directory.~~
(Return assembled and NETFILE generated by Wealthsimple Tax)

## 7. Validation & Error Checking (Handled by Wealthsimple)
- [ ] 8.1 ~~Run automated reasonability and compliance checks; log any errors.~~
(Validation handled by Wealthsimple Tax)

## 8. Submission (Via Wealthsimple)
- [ ] 9.1 ~~Transmit the 2023 NETFILE XML and record the CRA confirmation number.~~ (Covered by step 4.7)

## 9. Archival & Logging
- [ ] 10.1 Encrypt and archive all 2023 source slips (if any manually handled), Wealthsimple Tax confirmation, logs, and scripts.
- [ ] 10.2 Delete superseded or obsolete scripts after replacement confirmation.

## 10. Post-Filing Monitoring
- [ ] 11.1 Poll CRA weekly for the 2023 Notice of Assessment and compare results with Wealthsimple Tax.
- [ ] 11.2 Log and flag any variance > $2 for manual resolution.

## 11. Termination
- [ ] 12.1 Confirm all 2023 tasks are complete, logs stored, and no further actions remain.

## 2. Transaction Data Preparation & Input
- [x] 5.1 Open the database and extract only 2023 rows into an in-memory DataFrame/array. (Original 2.2)
- [x] 5.2 Process a 1–3 row sample through Gemini 2.5-flash with cache verification. (Original 3.1)
- [x] 5.3 Upon successful sample, tag every remaining 2023 transaction in parallel. (Original 3.2)
- [x] 5.4 Prepare categorized transaction data (from `tagged_transactions_2023`) for input into Wealthsimple Tax (e.g., summarize by category, identify relevant Wealthsimple Tax sections/forms).
- [ ] 5.5 Manually input/Import categorized transaction summaries and any other required financial data (e.g., from downloaded slips if AFR fails) into the appropriate sections of Wealthsimple Tax. (User is now performing this step).

## 3. Wealthsimple Tax - Finalization & Submission
- [ ] 6.1 Manually input any remaining required information not covered by AFR or transaction data (e.g., specific claims, credits, carry-forwards from previous year's NOA).
- [ ] 6.2 Perform Wealthsimple Tax review & optimization steps.
- [ ] 6.3 Validate the complete tax return within Wealthsimple Tax.
- [ ] 6.4 Submit the 2023 T1 tax return via NETFILE through Wealthsimple Tax.
- [ ] 6.5 Confirm CRA receipt/acceptance.

## 4. Archival & Monitoring
- [ ] 7.1 Download and save the final submitted T1 return (PDF/TAX file) from Wealthsimple Tax.
- [ ] 7.2 Download and save the Notice of Assessment (NOA) once available from CRA.
- [ ] 7.3 Store all relevant documents (slips, working files, submitted return, NOA) in the designated `finances/tax_returns/2023/` directory.
- [ ] 7.4 Monitor for any post-submission communications from CRA.

---
*Original step 2.1 (Download all 2023 CRA Auto-fill slips) was superseded by the Wealthsimple Tax AFR attempt.*
*Renumbered sections from previous TODO for clarity after AFR attempt.* 